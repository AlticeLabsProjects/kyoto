<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kyoto Tycoon: kyototycoon::TimedDB Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kyoto Tycoon
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacekyototycoon.html">kyototycoon</a>      </li>
      <li class="navelem"><a class="el" href="classkyototycoon_1_1TimedDB.html">TimedDB</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">kyototycoon::TimedDB Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="kyototycoon::TimedDB" -->
<p>Timed database.  
 <a href="classkyototycoon_1_1TimedDB.html#details">More...</a></p>

<p><code>#include &lt;kttimeddb.h&gt;</code></p>

<p><a href="classkyototycoon_1_1TimedDB-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Cursor.html">Cursor</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Cursor.html" title="Cursor to indicate a record.">Cursor</a> to indicate a record.  <a href="classkyototycoon_1_1TimedDB_1_1Cursor.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>MergeLine</b></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Front line of a merging list. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>TimedMetaTrigger</b></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger of meta database operations. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>TimedVisitor</b></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html" title="Interface to access a record.">Visitor</a> to handle records with time stamps. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB_1_1UpdateTrigger.html">UpdateTrigger</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface to trigger update operations.  <a href="classkyototycoon_1_1TimedDB_1_1UpdateTrigger.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface to access a record.  <a href="classkyototycoon_1_1TimedDB_1_1Visitor.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561">MergeMode</a> { <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac">MSET</a>, 
<a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a8a7b107dd0064ea898a04447c5f587be">MADD</a>, 
<a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561ad5b739bbc10ab35945963114e02fd3a8">MREPLACE</a>, 
<a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a22a0555956d94a65d840423e956d5473">MAPPEND</a>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Merge modes.  <a href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a3ae8b8bd0f7085481d5863d38a9ca5d3">TimedDB</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a3ae8b8bd0f7085481d5863d38a9ca5d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a463cc68ebc25af2a4175b7fd02ab82fe">~TimedDB</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a463cc68ebc25af2a4175b7fd02ab82fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a3553250e8c628347dc79b28e0787959b">set_internal_db</a> (kc::BasicDB *db)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the internal database object.  <a href="#a3553250e8c628347dc79b28e0787959b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">kc::BasicDB::Error&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#abd7b66c4f8acfa8b24688e851805806f">error</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last happened error.  <a href="#abd7b66c4f8acfa8b24688e851805806f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#afb75c17440f2c757cec611de16903262">set_error</a> (kc::BasicDB::Error::Code code, const char *message)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the error information.  <a href="#afb75c17440f2c757cec611de16903262"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#afa882641df0e672db3e51829cd62ee8c">open</a> (const std::string &amp;<a class="el" href="classkyototycoon_1_1TimedDB.html#a28550ff9f30b07e7e994c975d10565e7">path</a>=&quot;:&quot;, uint32_t mode=kc::BasicDB::OWRITER|kc::BasicDB::OCREATE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a database file.  <a href="#afa882641df0e672db3e51829cd62ee8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#af69c719753f44fa216d286094f6227f1">close</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the database file.  <a href="#af69c719753f44fa216d286094f6227f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a1bf543ce065d1a54231a439d2a9f982b">accept</a> (const char *kbuf, size_t ksiz, <a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *visitor, bool writable=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept a visitor to a record.  <a href="#a1bf543ce065d1a54231a439d2a9f982b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ad81e793803d75b5b398a0c5d445a3d48">accept_bulk</a> (const std::vector&lt; std::string &gt; &amp;keys, <a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *visitor, bool writable=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept a visitor to multiple records at once.  <a href="#ad81e793803d75b5b398a0c5d445a3d48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a23644d5a1c298e1fd08dc86664d3e0ef">iterate</a> (<a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *visitor, bool writable=true, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate to accept a visitor for each record.  <a href="#a23644d5a1c298e1fd08dc86664d3e0ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ab0c641a36daa0886c7056dc69f871195">scan_parallel</a> (<a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *visitor, size_t thnum, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan each record in parallel.  <a href="#ab0c641a36daa0886c7056dc69f871195"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a1f3c628337cd4d3b7e457e427bb9f2c9">synchronize</a> (bool hard=false, kc::BasicDB::FileProcessor *proc=NULL, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize updated contents with the file and the device.  <a href="#a1f3c628337cd4d3b7e457e427bb9f2c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a9b29ab81a93c419f13f1741c23a7d4f6">occupy</a> (bool writable=true, kc::BasicDB::FileProcessor *proc=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Occupy database by locking and do something meanwhile.  <a href="#a9b29ab81a93c419f13f1741c23a7d4f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ac1cb3aa99b62dc24f31bbe7b18d346ea">copy</a> (const std::string &amp;dest, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a copy of the database file.  <a href="#ac1cb3aa99b62dc24f31bbe7b18d346ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a3dc22ca71dd7f7f9da5587e84ecdc3b8">begin_transaction</a> (bool hard=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin transaction.  <a href="#a3dc22ca71dd7f7f9da5587e84ecdc3b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ab21cfadb7e54cc7857637987d5f90a94">begin_transaction_try</a> (bool hard=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to begin transaction.  <a href="#ab21cfadb7e54cc7857637987d5f90a94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a577789be008faf73ca929403d72cafe0">end_transaction</a> (bool commit=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End transaction.  <a href="#a577789be008faf73ca929403d72cafe0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a43c6c184bfb0ba1698b7e333e62570bb">clear</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all records.  <a href="#a43c6c184bfb0ba1698b7e333e62570bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a2329365a0764d1ec7176172b62eabc71">count</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of records.  <a href="#a2329365a0764d1ec7176172b62eabc71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a4510d03d2d991ea73dfa9765cae94b43">size</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the size of the database file.  <a href="#a4510d03d2d991ea73dfa9765cae94b43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a28550ff9f30b07e7e994c975d10565e7">path</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the path of the database file.  <a href="#a28550ff9f30b07e7e994c975d10565e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a8571c77d47d52ff422a36716a0bc18ee">status</a> (std::map&lt; std::string, std::string &gt; *strmap)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the miscellaneous status information.  <a href="#a8571c77d47d52ff422a36716a0bc18ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a52d24a92f7c658fabb3d471b0c52c59b">set</a> (const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a record.  <a href="#a52d24a92f7c658fabb3d471b0c52c59b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#aa7f1d725def244400200552581f37167">set</a> (const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a record.  <a href="#aa7f1d725def244400200552581f37167"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a716b5b1e78afa90db5c446ef179221b1">add</a> (const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a record.  <a href="#a716b5b1e78afa90db5c446ef179221b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#aebd4d709e85c7dbc65f75b41c35bdd6d">add</a> (const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a record.  <a href="#aebd4d709e85c7dbc65f75b41c35bdd6d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#af9ca141a8c834f89986ee8d1f959138e">replace</a> (const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace the value of a record.  <a href="#af9ca141a8c834f89986ee8d1f959138e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ac112aff8063ea3ef37f68139c2ac8e6a">replace</a> (const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace the value of a record.  <a href="#ac112aff8063ea3ef37f68139c2ac8e6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a801436d5dfbf3cb46f3d62777dd22a90">append</a> (const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Append the value of a record.  <a href="#a801436d5dfbf3cb46f3d62777dd22a90"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a3e426a7d69b74c215e76ebfb02f492d3">append</a> (const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a record.  <a href="#a3e426a7d69b74c215e76ebfb02f492d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a46cca4cba01481d2f6f439ce4e2b06a1">increment</a> (const char *kbuf, size_t ksiz, int64_t num, int64_t orig=0, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a number to the numeric integer value of a record.  <a href="#a46cca4cba01481d2f6f439ce4e2b06a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a4eef11dafb56563932dcea74dcb9418f">increment</a> (const std::string &amp;key, int64_t num, int64_t orig=0, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a number to the numeric integer value of a record.  <a href="#a4eef11dafb56563932dcea74dcb9418f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a064309a6db790c613dc9829736aade10">increment_double</a> (const char *kbuf, size_t ksiz, double num, double orig=0, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a number to the numeric double value of a record.  <a href="#a064309a6db790c613dc9829736aade10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ae06bee686507c7ceff417600bc329410">increment_double</a> (const std::string &amp;key, double num, double orig=0, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a number to the numeric double value of a record.  <a href="#ae06bee686507c7ceff417600bc329410"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a7ceae0e45098166295a1920830a380aa">cas</a> (const char *kbuf, size_t ksiz, const char *ovbuf, size_t ovsiz, const char *nvbuf, size_t nvsiz, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform compare-and-swap.  <a href="#a7ceae0e45098166295a1920830a380aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a5d7021da8a6b2785b8039aec3c07f351">cas</a> (const std::string &amp;key, const std::string &amp;ovalue, const std::string &amp;nvalue, int64_t xt=kc::INT64MAX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform compare-and-swap.  <a href="#a5d7021da8a6b2785b8039aec3c07f351"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#af023dbcdcddd926d8b06d22eafa95d2f">remove</a> (const char *kbuf, size_t ksiz)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a record.  <a href="#af023dbcdcddd926d8b06d22eafa95d2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a54fb97b111feaab89f5aedf72d69c462">remove</a> (const std::string &amp;key)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a record.  <a href="#a54fb97b111feaab89f5aedf72d69c462"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ac26c13dcd8f043a4bba8c91b0034e130">get</a> (const char *kbuf, size_t ksiz, size_t *sp, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a record.  <a href="#ac26c13dcd8f043a4bba8c91b0034e130"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a39b0daa78ca980b868071b24406093f4">get</a> (const std::string &amp;key, std::string *value, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a record.  <a href="#a39b0daa78ca980b868071b24406093f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#abe9750c27a9f5c55f4f833aabd1a411d">get</a> (const char *kbuf, size_t ksiz, char *vbuf, size_t max, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a record.  <a href="#abe9750c27a9f5c55f4f833aabd1a411d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a49ea18e05f5781ca9f7a9aa162a3d95d">check</a> (const char *kbuf, size_t ksiz, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the existence of a record.  <a href="#a49ea18e05f5781ca9f7a9aa162a3d95d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#af0d767d3fa1b80cae3ccb58ac76dc139">check</a> (const std::string &amp;key, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the existence of a record.  <a href="#af0d767d3fa1b80cae3ccb58ac76dc139"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a369bdd388ac35f59a7956273cdd322c5">seize</a> (const char *kbuf, size_t ksiz, size_t *sp, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a record and remove it atomically.  <a href="#a369bdd388ac35f59a7956273cdd322c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a7de618d11ae857751f7f836165c0e3b8">seize</a> (const std::string &amp;key, std::string *value, int64_t *xtp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a record and remove it atomically.  <a href="#a7de618d11ae857751f7f836165c0e3b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a6485cc0f8c7a225dccd0cf4f8678a0c3">set_bulk</a> (const std::map&lt; std::string, std::string &gt; &amp;recs, int64_t xt=kc::INT64MAX, bool atomic=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Store records at once.  <a href="#a6485cc0f8c7a225dccd0cf4f8678a0c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a425d5be6b33900897f70d3ec2fc317c2">remove_bulk</a> (const std::vector&lt; std::string &gt; &amp;keys, bool atomic=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove records at once.  <a href="#a425d5be6b33900897f70d3ec2fc317c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#acd647a5434cc49496cb90fce9d2b01b6">get_bulk</a> (const std::vector&lt; std::string &gt; &amp;keys, std::map&lt; std::string, std::string &gt; *recs, bool atomic=true)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve records at once.  <a href="#acd647a5434cc49496cb90fce9d2b01b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#abe0ed01fc83f1928a5d162c99d76cafd">dump_snapshot</a> (std::ostream *dest, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump records into a data stream.  <a href="#abe0ed01fc83f1928a5d162c99d76cafd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a842d6b73fa39e53215af5bbabe628ae7">dump_snapshot</a> (const std::string &amp;dest, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump records into a file.  <a href="#a842d6b73fa39e53215af5bbabe628ae7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a983812244d5b4f6f93e004e1197395c4">load_snapshot</a> (std::istream *src, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load records from a data stream.  <a href="#a983812244d5b4f6f93e004e1197395c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a229ed4eef39c7323b75ec1cd2140c2ef">load_snapshot</a> (const std::string &amp;src, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load records from a file.  <a href="#a229ed4eef39c7323b75ec1cd2140c2ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a462e2e93b6faa3d2709eeca15b4e9ff7">dump_snapshot_atomic</a> (const std::string &amp;dest, kc::Compressor *zcomp=NULL, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump records atomically into a file.  <a href="#a462e2e93b6faa3d2709eeca15b4e9ff7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#aa7f5743e9a6534fff0010f500962fd93">load_snapshot_atomic</a> (const std::string &amp;src, kc::Compressor *zcomp=NULL, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load records atomically from a file.  <a href="#aa7f5743e9a6534fff0010f500962fd93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">kc::BasicDB *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a764079e4e6ad2dd1651454a45da02028">reveal_inner_db</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveal the inner database object.  <a href="#a764079e4e6ad2dd1651454a45da02028"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a55966b82776b51d167fac05597de4622">vacuum</a> (int64_t step=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan the database and eliminate regions of expired records.  <a href="#a55966b82776b51d167fac05597de4622"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a9b84ef29e7ba25f59fd98e22ad45b2fa">recover</a> (const char *mbuf, size_t msiz)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Recover the database with an update log message.  <a href="#a9b84ef29e7ba25f59fd98e22ad45b2fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a33d48a58dd9127756da2b22fafe53777">match_prefix</a> (const std::string &amp;prefix, std::vector&lt; std::string &gt; *strvec, int64_t max=-1, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get keys matching a prefix string.  <a href="#a33d48a58dd9127756da2b22fafe53777"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a1ca05ebafef224e3ec3b12e7a30b9526">match_regex</a> (const std::string &amp;regex, std::vector&lt; std::string &gt; *strvec, int64_t max=-1, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get keys matching a regular expression string.  <a href="#a1ca05ebafef224e3ec3b12e7a30b9526"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#ac9aaf82209dc801d4d233cc0c592d67b">match_similar</a> (const std::string &amp;origin, size_t range, bool utf, std::vector&lt; std::string &gt; *strvec, int64_t max=-1, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get keys similar to a string in terms of the levenshtein distance.  <a href="#ac9aaf82209dc801d4d233cc0c592d67b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a7b77f684161670da7aff694e58c8877b">merge</a> (<a class="el" href="classkyototycoon_1_1TimedDB.html">TimedDB</a> **srcary, size_t srcnum, <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561">MergeMode</a> mode=<a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac">MSET</a>, kc::BasicDB::ProgressChecker *checker=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Merge records from other databases.  <a href="#a7b77f684161670da7aff694e58c8877b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Cursor.html">Cursor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a55b5f73fa02f9c898a7a0c998eeb2d0c">cursor</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a cursor object.  <a href="#a55b5f73fa02f9c898a7a0c998eeb2d0c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#acd6c95039eb2e1e7f1cb191c08cc272a">tune_logger</a> (kc::BasicDB::Logger *logger, uint32_t kinds=kc::BasicDB::Logger::WARN|kc::BasicDB::Logger::ERROR)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the internal logger.  <a href="#acd6c95039eb2e1e7f1cb191c08cc272a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a6271031b9d1120e9bf30a18d410c02ad">tune_update_trigger</a> (<a class="el" href="classkyototycoon_1_1TimedDB_1_1UpdateTrigger.html">UpdateTrigger</a> *trigger)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the internal update trigger.  <a href="#a6271031b9d1120e9bf30a18d410c02ad"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#abf8792420b5a102285b2c1581a27a950">tokenize_update_log</a> (const char *mbuf, size_t msiz, std::vector&lt; std::string &gt; *tokens)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tokenize an update log message.  <a href="#abf8792420b5a102285b2c1581a27a950"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a729e92418eb777b7f6687aa7695b0e41">status_snapshot_atomic</a> (const std::string &amp;src, uint64_t *tsp=NULL, int64_t *cntp=NULL, int64_t *sizp=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get status of an atomic snapshot file.  <a href="#a729e92418eb777b7f6687aa7695b0e41"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a2435e4d31a0b3b23aed3f8b5c09b75d8">XTWIDTH</a> = 5</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The width of expiration time.  <a href="#a2435e4d31a0b3b23aed3f8b5c09b75d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkyototycoon_1_1TimedDB.html#a96ccafc94a249fc1c254014e272905f9">XTMAX</a> = (1LL &lt;&lt; (XTWIDTH * 8)) - 1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of expiration time.  <a href="#a96ccafc94a249fc1c254014e272905f9"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Timed database. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This class is a concrete class of a wrapper for the polymorphic database to add expiration features. This class can be inherited but overwriting methods is forbidden. Before every database operation, it is necessary to call the <a class="el" href="classkyototycoon_1_1TimedDB.html#afa882641df0e672db3e51829cd62ee8c" title="Open a database file.">TimedDB::open</a> method in order to open a database file and connect the database object to it. To avoid data missing or corruption, it is important to close every database file by the <a class="el" href="classkyototycoon_1_1TimedDB.html#af69c719753f44fa216d286094f6227f1" title="Close the database file.">TimedDB::close</a> method when the database is no longer in use. It is forbidden for multible database objects in a process to open the same database at the same time. </dd></dl>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="ae892844efd8d65d383e53a7e91265561"></a><!-- doxytag: member="kyototycoon::TimedDB::MergeMode" ref="ae892844efd8d65d383e53a7e91265561" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561">kyototycoon::TimedDB::MergeMode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Merge modes. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac"></a><!-- doxytag: member="MSET" ref="ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac" args="" -->MSET</em>&nbsp;</td><td>
<p>overwrite the existing value </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae892844efd8d65d383e53a7e91265561a8a7b107dd0064ea898a04447c5f587be"></a><!-- doxytag: member="MADD" ref="ae892844efd8d65d383e53a7e91265561a8a7b107dd0064ea898a04447c5f587be" args="" -->MADD</em>&nbsp;</td><td>
<p>keep the existing value </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae892844efd8d65d383e53a7e91265561ad5b739bbc10ab35945963114e02fd3a8"></a><!-- doxytag: member="MREPLACE" ref="ae892844efd8d65d383e53a7e91265561ad5b739bbc10ab35945963114e02fd3a8" args="" -->MREPLACE</em>&nbsp;</td><td>
<p>modify the existing record only </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae892844efd8d65d383e53a7e91265561a22a0555956d94a65d840423e956d5473"></a><!-- doxytag: member="MAPPEND" ref="ae892844efd8d65d383e53a7e91265561a22a0555956d94a65d840423e956d5473" args="" -->MAPPEND</em>&nbsp;</td><td>
<p>append the new value </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3ae8b8bd0f7085481d5863d38a9ca5d3"></a><!-- doxytag: member="kyototycoon::TimedDB::TimedDB" ref="a3ae8b8bd0f7085481d5863d38a9ca5d3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkyototycoon_1_1TimedDB.html#a3ae8b8bd0f7085481d5863d38a9ca5d3">kyototycoon::TimedDB::TimedDB</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default constructor. </p>

</div>
</div>
<a class="anchor" id="a463cc68ebc25af2a4175b7fd02ab82fe"></a><!-- doxytag: member="kyototycoon::TimedDB::~TimedDB" ref="a463cc68ebc25af2a4175b7fd02ab82fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classkyototycoon_1_1TimedDB.html#a463cc68ebc25af2a4175b7fd02ab82fe">kyototycoon::TimedDB::~TimedDB</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3553250e8c628347dc79b28e0787959b"></a><!-- doxytag: member="kyototycoon::TimedDB::set_internal_db" ref="a3553250e8c628347dc79b28e0787959b" args="(kc::BasicDB *db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a3553250e8c628347dc79b28e0787959b">kyototycoon::TimedDB::set_internal_db</a> </td>
          <td>(</td>
          <td class="paramtype">kc::BasicDB *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the internal database object. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>the internal database object. Its possession is transferred inside and the object is deleted automatically. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="abd7b66c4f8acfa8b24688e851805806f"></a><!-- doxytag: member="kyototycoon::TimedDB::error" ref="abd7b66c4f8acfa8b24688e851805806f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kc::BasicDB::Error <a class="el" href="classkyototycoon_1_1TimedDB.html#abd7b66c4f8acfa8b24688e851805806f">kyototycoon::TimedDB::error</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the last happened error. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the last happened error. </dd></dl>

</div>
</div>
<a class="anchor" id="afb75c17440f2c757cec611de16903262"></a><!-- doxytag: member="kyototycoon::TimedDB::set_error" ref="afb75c17440f2c757cec611de16903262" args="(kc::BasicDB::Error::Code code, const char *message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classkyototycoon_1_1TimedDB.html#afb75c17440f2c757cec611de16903262">kyototycoon::TimedDB::set_error</a> </td>
          <td>(</td>
          <td class="paramtype">kc::BasicDB::Error::Code&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the error information. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>an error code. </td></tr>
    <tr><td class="paramname">message</td><td>a supplement message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afa882641df0e672db3e51829cd62ee8c"></a><!-- doxytag: member="kyototycoon::TimedDB::open" ref="afa882641df0e672db3e51829cd62ee8c" args="(const std::string &amp;path=&quot;:&quot;, uint32_t mode=kc::BasicDB::OWRITER|kc::BasicDB::OCREATE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#afa882641df0e672db3e51829cd62ee8c">kyototycoon::TimedDB::open</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;:&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em> = <code>kc::BasicDB::OWRITER&#160;|&#160;kc::BasicDB::OCREATE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open a database file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path of a database file. The same as with kc::PolyDB. In addition, the following tuning parameters are supported. "ktopts" sets options and the value can contain "p" for the persistent option. "ktcapcnt" sets the capacity by record number. "ktcapsiz" sets the capacity by database size. </td></tr>
    <tr><td class="paramname">mode</td><td>the connection mode. The same as with kc::PolyDB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="af69c719753f44fa216d286094f6227f1"></a><!-- doxytag: member="kyototycoon::TimedDB::close" ref="af69c719753f44fa216d286094f6227f1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#af69c719753f44fa216d286094f6227f1">kyototycoon::TimedDB::close</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the database file. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a1bf543ce065d1a54231a439d2a9f982b"></a><!-- doxytag: member="kyototycoon::TimedDB::accept" ref="a1bf543ce065d1a54231a439d2a9f982b" args="(const char *kbuf, size_t ksiz, Visitor *visitor, bool writable=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a1bf543ce065d1a54231a439d2a9f982b">kyototycoon::TimedDB::accept</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accept a visitor to a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">visitor</td><td>a visitor object. </td></tr>
    <tr><td class="paramname">writable</td><td>true for writable operation, or false for read-only operation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>the operation for each record is performed atomically and other threads accessing the same record are blocked. </dd></dl>

</div>
</div>
<a class="anchor" id="ad81e793803d75b5b398a0c5d445a3d48"></a><!-- doxytag: member="kyototycoon::TimedDB::accept_bulk" ref="ad81e793803d75b5b398a0c5d445a3d48" args="(const std::vector&lt; std::string &gt; &amp;keys, Visitor *visitor, bool writable=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#ad81e793803d75b5b398a0c5d445a3d48">kyototycoon::TimedDB::accept_bulk</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accept a visitor to multiple records at once. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">keys</td><td>specifies a string vector of the keys. </td></tr>
    <tr><td class="paramname">visitor</td><td>a visitor object. </td></tr>
    <tr><td class="paramname">writable</td><td>true for writable operation, or false for read-only operation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The operations for specified records are performed atomically and other threads accessing the same records are blocked. To avoid deadlock, any database operation must not be performed in this function. </dd></dl>

</div>
</div>
<a class="anchor" id="a23644d5a1c298e1fd08dc86664d3e0ef"></a><!-- doxytag: member="kyototycoon::TimedDB::iterate" ref="a23644d5a1c298e1fd08dc86664d3e0ef" args="(Visitor *visitor, bool writable=true, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a23644d5a1c298e1fd08dc86664d3e0ef">kyototycoon::TimedDB::iterate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Iterate to accept a visitor for each record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">visitor</td><td>a visitor object. </td></tr>
    <tr><td class="paramname">writable</td><td>true for writable operation, or false for read-only operation. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The whole iteration is performed atomically and other threads are blocked. </dd></dl>

</div>
</div>
<a class="anchor" id="ab0c641a36daa0886c7056dc69f871195"></a><!-- doxytag: member="kyototycoon::TimedDB::scan_parallel" ref="ab0c641a36daa0886c7056dc69f871195" args="(Visitor *visitor, size_t thnum, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#ab0c641a36daa0886c7056dc69f871195">kyototycoon::TimedDB::scan_parallel</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Visitor.html">Visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scan each record in parallel. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">visitor</td><td>a visitor object. </td></tr>
    <tr><td class="paramname">thnum</td><td>the number of worker threads. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is for reading records and not for updating ones. The return value of the visitor is just ignored. To avoid deadlock, any explicit database operation must not be performed in this function. </dd></dl>

</div>
</div>
<a class="anchor" id="a1f3c628337cd4d3b7e457e427bb9f2c9"></a><!-- doxytag: member="kyototycoon::TimedDB::synchronize" ref="a1f3c628337cd4d3b7e457e427bb9f2c9" args="(bool hard=false, kc::BasicDB::FileProcessor *proc=NULL, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a1f3c628337cd4d3b7e457e427bb9f2c9">kyototycoon::TimedDB::synchronize</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hard</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::FileProcessor *&#160;</td>
          <td class="paramname"><em>proc</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Synchronize updated contents with the file and the device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hard</td><td>true for physical synchronization with the device, or false for logical synchronization with the file system. </td></tr>
    <tr><td class="paramname">proc</td><td>a postprocessor object. If it is NULL, no postprocessing is performed. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The operation of the postprocessor is performed atomically and other threads accessing the same record are blocked. To avoid deadlock, any explicit database operation must not be performed in this function. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b29ab81a93c419f13f1741c23a7d4f6"></a><!-- doxytag: member="kyototycoon::TimedDB::occupy" ref="a9b29ab81a93c419f13f1741c23a7d4f6" args="(bool writable=true, kc::BasicDB::FileProcessor *proc=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a9b29ab81a93c419f13f1741c23a7d4f6">kyototycoon::TimedDB::occupy</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::FileProcessor *&#160;</td>
          <td class="paramname"><em>proc</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Occupy database by locking and do something meanwhile. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">writable</td><td>true to use writer lock, or false to use reader lock. </td></tr>
    <tr><td class="paramname">proc</td><td>a processor object. If it is NULL, no processing is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The operation of the processor is performed atomically and other threads accessing the same record are blocked. To avoid deadlock, any explicit database operation must not be performed in this function. </dd></dl>

</div>
</div>
<a class="anchor" id="ac1cb3aa99b62dc24f31bbe7b18d346ea"></a><!-- doxytag: member="kyototycoon::TimedDB::copy" ref="ac1cb3aa99b62dc24f31bbe7b18d346ea" args="(const std::string &amp;dest, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#ac1cb3aa99b62dc24f31bbe7b18d346ea">kyototycoon::TimedDB::copy</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a copy of the database file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the path of the destination file. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a3dc22ca71dd7f7f9da5587e84ecdc3b8"></a><!-- doxytag: member="kyototycoon::TimedDB::begin_transaction" ref="a3dc22ca71dd7f7f9da5587e84ecdc3b8" args="(bool hard=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a3dc22ca71dd7f7f9da5587e84ecdc3b8">kyototycoon::TimedDB::begin_transaction</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hard</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Begin transaction. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hard</td><td>true for physical synchronization with the device, or false for logical synchronization with the file system. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ab21cfadb7e54cc7857637987d5f90a94"></a><!-- doxytag: member="kyototycoon::TimedDB::begin_transaction_try" ref="ab21cfadb7e54cc7857637987d5f90a94" args="(bool hard=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#ab21cfadb7e54cc7857637987d5f90a94">kyototycoon::TimedDB::begin_transaction_try</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hard</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Try to begin transaction. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hard</td><td>true for physical synchronization with the device, or false for logical synchronization with the file system. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a577789be008faf73ca929403d72cafe0"></a><!-- doxytag: member="kyototycoon::TimedDB::end_transaction" ref="a577789be008faf73ca929403d72cafe0" args="(bool commit=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a577789be008faf73ca929403d72cafe0">kyototycoon::TimedDB::end_transaction</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>commit</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End transaction. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">commit</td><td>true to commit the transaction, or false to abort the transaction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a43c6c184bfb0ba1698b7e333e62570bb"></a><!-- doxytag: member="kyototycoon::TimedDB::clear" ref="a43c6c184bfb0ba1698b7e333e62570bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a43c6c184bfb0ba1698b7e333e62570bb">kyototycoon::TimedDB::clear</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove all records. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a2329365a0764d1ec7176172b62eabc71"></a><!-- doxytag: member="kyototycoon::TimedDB::count" ref="a2329365a0764d1ec7176172b62eabc71" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a2329365a0764d1ec7176172b62eabc71">kyototycoon::TimedDB::count</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of records. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of records, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a4510d03d2d991ea73dfa9765cae94b43"></a><!-- doxytag: member="kyototycoon::TimedDB::size" ref="a4510d03d2d991ea73dfa9765cae94b43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a4510d03d2d991ea73dfa9765cae94b43">kyototycoon::TimedDB::size</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the size of the database file. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the size of the database file in bytes, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a28550ff9f30b07e7e994c975d10565e7"></a><!-- doxytag: member="kyototycoon::TimedDB::path" ref="a28550ff9f30b07e7e994c975d10565e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classkyototycoon_1_1TimedDB.html#a28550ff9f30b07e7e994c975d10565e7">kyototycoon::TimedDB::path</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the path of the database file. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the path of the database file, or an empty string on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a8571c77d47d52ff422a36716a0bc18ee"></a><!-- doxytag: member="kyototycoon::TimedDB::status" ref="a8571c77d47d52ff422a36716a0bc18ee" args="(std::map&lt; std::string, std::string &gt; *strmap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a8571c77d47d52ff422a36716a0bc18ee">kyototycoon::TimedDB::status</a> </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; *&#160;</td>
          <td class="paramname"><em>strmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the miscellaneous status information. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">strmap</td><td>a string map to contain the result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a52d24a92f7c658fabb3d471b0c52c59b"></a><!-- doxytag: member="kyototycoon::TimedDB::set" ref="a52d24a92f7c658fabb3d471b0c52c59b" args="(const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a52d24a92f7c658fabb3d471b0c52c59b">kyototycoon::TimedDB::set</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>vbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">vbuf</td><td>the pointer to the value region. </td></tr>
    <tr><td class="paramname">vsiz</td><td>the size of the value region. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, a new record is created. If the corresponding record exists, the value is overwritten. </dd></dl>

</div>
</div>
<a class="anchor" id="aa7f1d725def244400200552581f37167"></a><!-- doxytag: member="kyototycoon::TimedDB::set" ref="aa7f1d725def244400200552581f37167" args="(const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a52d24a92f7c658fabb3d471b0c52c59b">kyototycoon::TimedDB::set</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::set method except that the parameters are std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="a716b5b1e78afa90db5c446ef179221b1"></a><!-- doxytag: member="kyototycoon::TimedDB::add" ref="a716b5b1e78afa90db5c446ef179221b1" args="(const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a716b5b1e78afa90db5c446ef179221b1">kyototycoon::TimedDB::add</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>vbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">vbuf</td><td>the pointer to the value region. </td></tr>
    <tr><td class="paramname">vsiz</td><td>the size of the value region. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, a new record is created. If the corresponding record exists, the record is not modified and false is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="aebd4d709e85c7dbc65f75b41c35bdd6d"></a><!-- doxytag: member="kyototycoon::TimedDB::add" ref="aebd4d709e85c7dbc65f75b41c35bdd6d" args="(const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a716b5b1e78afa90db5c446ef179221b1">kyototycoon::TimedDB::add</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::add method except that the parameters are std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="af9ca141a8c834f89986ee8d1f959138e"></a><!-- doxytag: member="kyototycoon::TimedDB::replace" ref="af9ca141a8c834f89986ee8d1f959138e" args="(const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#af9ca141a8c834f89986ee8d1f959138e">kyototycoon::TimedDB::replace</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>vbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replace the value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">vbuf</td><td>the pointer to the value region. </td></tr>
    <tr><td class="paramname">vsiz</td><td>the size of the value region. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, no new record is created and false is returned. If the corresponding record exists, the value is modified. </dd></dl>

</div>
</div>
<a class="anchor" id="ac112aff8063ea3ef37f68139c2ac8e6a"></a><!-- doxytag: member="kyototycoon::TimedDB::replace" ref="ac112aff8063ea3ef37f68139c2ac8e6a" args="(const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#af9ca141a8c834f89986ee8d1f959138e">kyototycoon::TimedDB::replace</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replace the value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::replace method except that the parameters are std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="a801436d5dfbf3cb46f3d62777dd22a90"></a><!-- doxytag: member="kyototycoon::TimedDB::append" ref="a801436d5dfbf3cb46f3d62777dd22a90" args="(const char *kbuf, size_t ksiz, const char *vbuf, size_t vsiz, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a801436d5dfbf3cb46f3d62777dd22a90">kyototycoon::TimedDB::append</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>vbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Append the value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">vbuf</td><td>the pointer to the value region. </td></tr>
    <tr><td class="paramname">vsiz</td><td>the size of the value region. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, a new record is created. If the corresponding record exists, the given value is appended at the end of the existing value. </dd></dl>

</div>
</div>
<a class="anchor" id="a3e426a7d69b74c215e76ebfb02f492d3"></a><!-- doxytag: member="kyototycoon::TimedDB::append" ref="a3e426a7d69b74c215e76ebfb02f492d3" args="(const std::string &amp;key, const std::string &amp;value, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a801436d5dfbf3cb46f3d62777dd22a90">kyototycoon::TimedDB::append</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::append method except that the parameters are std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="a46cca4cba01481d2f6f439ce4e2b06a1"></a><!-- doxytag: member="kyototycoon::TimedDB::increment" ref="a46cca4cba01481d2f6f439ce4e2b06a1" args="(const char *kbuf, size_t ksiz, int64_t num, int64_t orig=0, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a46cca4cba01481d2f6f439ce4e2b06a1">kyototycoon::TimedDB::increment</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>orig</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a number to the numeric integer value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">num</td><td>the additional number. </td></tr>
    <tr><td class="paramname">orig</td><td>the origin number if no record corresponds to the key. If it is INT64MIN and no record corresponds, this function fails. If it is INT64MAX, the value is set as the additional number regardless of the current value. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the result value, or kyotocabinet::INT64MIN on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The value is serialized as an 8-byte binary integer in big-endian order, not a decimal string. If existing value is not 8-byte, this function fails. </dd></dl>

</div>
</div>
<a class="anchor" id="a4eef11dafb56563932dcea74dcb9418f"></a><!-- doxytag: member="kyototycoon::TimedDB::increment" ref="a4eef11dafb56563932dcea74dcb9418f" args="(const std::string &amp;key, int64_t num, int64_t orig=0, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a46cca4cba01481d2f6f439ce4e2b06a1">kyototycoon::TimedDB::increment</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>orig</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a number to the numeric integer value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::increment method except that the parameter is std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="a064309a6db790c613dc9829736aade10"></a><!-- doxytag: member="kyototycoon::TimedDB::increment_double" ref="a064309a6db790c613dc9829736aade10" args="(const char *kbuf, size_t ksiz, double num, double orig=0, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classkyototycoon_1_1TimedDB.html#a064309a6db790c613dc9829736aade10">kyototycoon::TimedDB::increment_double</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>orig</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a number to the numeric double value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">num</td><td>the additional number. </td></tr>
    <tr><td class="paramname">orig</td><td>the origin number if no record corresponds to the key. If it is negative infinity and no record corresponds, this function fails. If it is positive infinity, the value is set as the additional number regardless of the current value. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the result value, or Not-a-number on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The value is serialized as an 16-byte binary fixed-point number in big-endian order, not a decimal string. If existing value is not 16-byte, this function fails. </dd></dl>

</div>
</div>
<a class="anchor" id="ae06bee686507c7ceff417600bc329410"></a><!-- doxytag: member="kyototycoon::TimedDB::increment_double" ref="ae06bee686507c7ceff417600bc329410" args="(const std::string &amp;key, double num, double orig=0, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classkyototycoon_1_1TimedDB.html#a064309a6db790c613dc9829736aade10">kyototycoon::TimedDB::increment_double</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>orig</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a number to the numeric double value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::increment_double method except that the parameter is std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="a7ceae0e45098166295a1920830a380aa"></a><!-- doxytag: member="kyototycoon::TimedDB::cas" ref="a7ceae0e45098166295a1920830a380aa" args="(const char *kbuf, size_t ksiz, const char *ovbuf, size_t ovsiz, const char *nvbuf, size_t nvsiz, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a7ceae0e45098166295a1920830a380aa">kyototycoon::TimedDB::cas</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ovbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ovsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nvbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nvsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform compare-and-swap. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">ovbuf</td><td>the pointer to the old value region. NULL means that no record corresponds. </td></tr>
    <tr><td class="paramname">ovsiz</td><td>the size of the old value region. </td></tr>
    <tr><td class="paramname">nvbuf</td><td>the pointer to the new value region. NULL means that the record is removed. </td></tr>
    <tr><td class="paramname">nvsiz</td><td>the size of new old value region. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a5d7021da8a6b2785b8039aec3c07f351"></a><!-- doxytag: member="kyototycoon::TimedDB::cas" ref="a5d7021da8a6b2785b8039aec3c07f351" args="(const std::string &amp;key, const std::string &amp;ovalue, const std::string &amp;nvalue, int64_t xt=kc::INT64MAX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a7ceae0e45098166295a1920830a380aa">kyototycoon::TimedDB::cas</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ovalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>nvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform compare-and-swap. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::cas method except that the parameters are std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="af023dbcdcddd926d8b06d22eafa95d2f"></a><!-- doxytag: member="kyototycoon::TimedDB::remove" ref="af023dbcdcddd926d8b06d22eafa95d2f" args="(const char *kbuf, size_t ksiz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#af023dbcdcddd926d8b06d22eafa95d2f">kyototycoon::TimedDB::remove</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, false is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="a54fb97b111feaab89f5aedf72d69c462"></a><!-- doxytag: member="kyototycoon::TimedDB::remove" ref="a54fb97b111feaab89f5aedf72d69c462" args="(const std::string &amp;key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#af023dbcdcddd926d8b06d22eafa95d2f">kyototycoon::TimedDB::remove</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::remove method except that the parameter is std::string. </dd></dl>

</div>
</div>
<a class="anchor" id="ac26c13dcd8f043a4bba8c91b0034e130"></a><!-- doxytag: member="kyototycoon::TimedDB::get" ref="ac26c13dcd8f043a4bba8c91b0034e130" args="(const char *kbuf, size_t ksiz, size_t *sp, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="classkyototycoon_1_1TimedDB.html#ac26c13dcd8f043a4bba8c91b0034e130">kyototycoon::TimedDB::get</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">sp</td><td>the pointer to the variable into which the size of the region of the return value is assigned. </td></tr>
    <tr><td class="paramname">xtp</td><td>the pointer to the variable into which the absolute expiration time is assigned. If it is NULL, it is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the pointer to the value region of the corresponding record, or NULL on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, NULL is returned. Because an additional zero code is appended at the end of the region of the return value, the return value can be treated as a C-style string. Because the region of the return value is allocated with the the new[] operator, it should be released with the delete[] operator when it is no longer in use. </dd></dl>

</div>
</div>
<a class="anchor" id="a39b0daa78ca980b868071b24406093f4"></a><!-- doxytag: member="kyototycoon::TimedDB::get" ref="a39b0daa78ca980b868071b24406093f4" args="(const std::string &amp;key, std::string *value, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#ac26c13dcd8f043a4bba8c91b0034e130">kyototycoon::TimedDB::get</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the value of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::get method except that the first parameters is the key string and the second parameter is a string to contain the result and the return value is bool for success. </dd></dl>

</div>
</div>
<a class="anchor" id="abe9750c27a9f5c55f4f833aabd1a411d"></a><!-- doxytag: member="kyototycoon::TimedDB::get" ref="abe9750c27a9f5c55f4f833aabd1a411d" args="(const char *kbuf, size_t ksiz, char *vbuf, size_t max, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="classkyototycoon_1_1TimedDB.html#ac26c13dcd8f043a4bba8c91b0034e130">kyototycoon::TimedDB::get</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>vbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the value of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">vbuf</td><td>the pointer to the buffer into which the value of the corresponding record is written. </td></tr>
    <tr><td class="paramname">max</td><td>the size of the buffer. </td></tr>
    <tr><td class="paramname">xtp</td><td>the pointer to the variable into which the expiration time from now in seconds is assigned. If it is NULL, it is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the size of the value, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a49ea18e05f5781ca9f7a9aa162a3d95d"></a><!-- doxytag: member="kyototycoon::TimedDB::check" ref="a49ea18e05f5781ca9f7a9aa162a3d95d" args="(const char *kbuf, size_t ksiz, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a49ea18e05f5781ca9f7a9aa162a3d95d">kyototycoon::TimedDB::check</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check the existence of a record. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">xtp</td><td>the pointer to the variable into which the absolute expiration time is assigned. If it is NULL, it is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the size of the value, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="af0d767d3fa1b80cae3ccb58ac76dc139"></a><!-- doxytag: member="kyototycoon::TimedDB::check" ref="af0d767d3fa1b80cae3ccb58ac76dc139" args="(const std::string &amp;key, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a49ea18e05f5781ca9f7a9aa162a3d95d">kyototycoon::TimedDB::check</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check the existence of a record. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::check method except that the first parameters is the key string. </dd></dl>

</div>
</div>
<a class="anchor" id="a369bdd388ac35f59a7956273cdd322c5"></a><!-- doxytag: member="kyototycoon::TimedDB::seize" ref="a369bdd388ac35f59a7956273cdd322c5" args="(const char *kbuf, size_t ksiz, size_t *sp, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="classkyototycoon_1_1TimedDB.html#a369bdd388ac35f59a7956273cdd322c5">kyototycoon::TimedDB::seize</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>kbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ksiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the value of a record and remove it atomically. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">kbuf</td><td>the pointer to the key region. </td></tr>
    <tr><td class="paramname">ksiz</td><td>the size of the key region. </td></tr>
    <tr><td class="paramname">sp</td><td>the pointer to the variable into which the size of the region of the return value is assigned. </td></tr>
    <tr><td class="paramname">xtp</td><td>the pointer to the variable into which the absolute expiration time is assigned. If it is NULL, it is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the pointer to the value region of the corresponding record, or NULL on failure. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If no record corresponds to the key, NULL is returned. Because an additional zero code is appended at the end of the region of the return value, the return value can be treated as a C-style string. Because the region of the return value is allocated with the the new[] operator, it should be released with the delete[] operator when it is no longer in use. </dd></dl>

</div>
</div>
<a class="anchor" id="a7de618d11ae857751f7f836165c0e3b8"></a><!-- doxytag: member="kyototycoon::TimedDB::seize" ref="a7de618d11ae857751f7f836165c0e3b8" args="(const std::string &amp;key, std::string *value, int64_t *xtp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a369bdd388ac35f59a7956273cdd322c5">kyototycoon::TimedDB::seize</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>xtp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the value of a record and remove it atomically. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Equal to the original DB::get method except that the first parameters is the key string and the second parameter is a string to contain the result and the return value is bool for success. </dd></dl>

</div>
</div>
<a class="anchor" id="a6485cc0f8c7a225dccd0cf4f8678a0c3"></a><!-- doxytag: member="kyototycoon::TimedDB::set_bulk" ref="a6485cc0f8c7a225dccd0cf4f8678a0c3" args="(const std::map&lt; std::string, std::string &gt; &amp;recs, int64_t xt=kc::INT64MAX, bool atomic=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a6485cc0f8c7a225dccd0cf4f8678a0c3">kyototycoon::TimedDB::set_bulk</a> </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>recs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>xt</em> = <code>kc::INT64MAX</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>atomic</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store records at once. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">recs</td><td>the records to store. </td></tr>
    <tr><td class="paramname">xt</td><td>the expiration time from now in seconds. If it is negative, the absolute value is treated as the epoch time. </td></tr>
    <tr><td class="paramname">atomic</td><td>true to perform all operations atomically, or false for non-atomic operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of stored records, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a425d5be6b33900897f70d3ec2fc317c2"></a><!-- doxytag: member="kyototycoon::TimedDB::remove_bulk" ref="a425d5be6b33900897f70d3ec2fc317c2" args="(const std::vector&lt; std::string &gt; &amp;keys, bool atomic=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a425d5be6b33900897f70d3ec2fc317c2">kyototycoon::TimedDB::remove_bulk</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>atomic</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove records at once. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">keys</td><td>the keys of the records to remove. </td></tr>
    <tr><td class="paramname">atomic</td><td>true to perform all operations atomically, or false for non-atomic operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of removed records, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="acd647a5434cc49496cb90fce9d2b01b6"></a><!-- doxytag: member="kyototycoon::TimedDB::get_bulk" ref="acd647a5434cc49496cb90fce9d2b01b6" args="(const std::vector&lt; std::string &gt; &amp;keys, std::map&lt; std::string, std::string &gt; *recs, bool atomic=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#acd647a5434cc49496cb90fce9d2b01b6">kyototycoon::TimedDB::get_bulk</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; *&#160;</td>
          <td class="paramname"><em>recs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>atomic</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve records at once. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">keys</td><td>the keys of the records to retrieve. </td></tr>
    <tr><td class="paramname">recs</td><td>a string map to contain the retrieved records. </td></tr>
    <tr><td class="paramname">atomic</td><td>true to perform all operations atomically, or false for non-atomic operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of retrieved records, or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="abe0ed01fc83f1928a5d162c99d76cafd"></a><!-- doxytag: member="kyototycoon::TimedDB::dump_snapshot" ref="abe0ed01fc83f1928a5d162c99d76cafd" args="(std::ostream *dest, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#abe0ed01fc83f1928a5d162c99d76cafd">kyototycoon::TimedDB::dump_snapshot</a> </td>
          <td>(</td>
          <td class="paramtype">std::ostream *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump records into a data stream. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the destination stream. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a842d6b73fa39e53215af5bbabe628ae7"></a><!-- doxytag: member="kyototycoon::TimedDB::dump_snapshot" ref="a842d6b73fa39e53215af5bbabe628ae7" args="(const std::string &amp;dest, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#abe0ed01fc83f1928a5d162c99d76cafd">kyototycoon::TimedDB::dump_snapshot</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump records into a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the path of the destination file. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a983812244d5b4f6f93e004e1197395c4"></a><!-- doxytag: member="kyototycoon::TimedDB::load_snapshot" ref="a983812244d5b4f6f93e004e1197395c4" args="(std::istream *src, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a983812244d5b4f6f93e004e1197395c4">kyototycoon::TimedDB::load_snapshot</a> </td>
          <td>(</td>
          <td class="paramtype">std::istream *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load records from a data stream. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the source stream. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a229ed4eef39c7323b75ec1cd2140c2ef"></a><!-- doxytag: member="kyototycoon::TimedDB::load_snapshot" ref="a229ed4eef39c7323b75ec1cd2140c2ef" args="(const std::string &amp;src, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a983812244d5b4f6f93e004e1197395c4">kyototycoon::TimedDB::load_snapshot</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load records from a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the path of the source file. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a462e2e93b6faa3d2709eeca15b4e9ff7"></a><!-- doxytag: member="kyototycoon::TimedDB::dump_snapshot_atomic" ref="a462e2e93b6faa3d2709eeca15b4e9ff7" args="(const std::string &amp;dest, kc::Compressor *zcomp=NULL, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a462e2e93b6faa3d2709eeca15b4e9ff7">kyototycoon::TimedDB::dump_snapshot_atomic</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::Compressor *&#160;</td>
          <td class="paramname"><em>zcomp</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump records atomically into a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the path of the destination file. </td></tr>
    <tr><td class="paramname">zcomp</td><td>the data compressor object. If it is NULL, no compression is performed. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="aa7f5743e9a6534fff0010f500962fd93"></a><!-- doxytag: member="kyototycoon::TimedDB::load_snapshot_atomic" ref="aa7f5743e9a6534fff0010f500962fd93" args="(const std::string &amp;src, kc::Compressor *zcomp=NULL, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#aa7f5743e9a6534fff0010f500962fd93">kyototycoon::TimedDB::load_snapshot_atomic</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::Compressor *&#160;</td>
          <td class="paramname"><em>zcomp</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load records atomically from a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the path of the source file. </td></tr>
    <tr><td class="paramname">zcomp</td><td>the data compressor object. If it is NULL, no decompression is performed. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a764079e4e6ad2dd1651454a45da02028"></a><!-- doxytag: member="kyototycoon::TimedDB::reveal_inner_db" ref="a764079e4e6ad2dd1651454a45da02028" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kc::BasicDB* <a class="el" href="classkyototycoon_1_1TimedDB.html#a764079e4e6ad2dd1651454a45da02028">kyototycoon::TimedDB::reveal_inner_db</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reveal the inner database object. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the inner database object, or NULL on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a55966b82776b51d167fac05597de4622"></a><!-- doxytag: member="kyototycoon::TimedDB::vacuum" ref="a55966b82776b51d167fac05597de4622" args="(int64_t step=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a55966b82776b51d167fac05597de4622">kyototycoon::TimedDB::vacuum</a> </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>step</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scan the database and eliminate regions of expired records. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">step</td><td>the number of steps. If it is not more than 0, the whole region is scanned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b84ef29e7ba25f59fd98e22ad45b2fa"></a><!-- doxytag: member="kyototycoon::TimedDB::recover" ref="a9b84ef29e7ba25f59fd98e22ad45b2fa" args="(const char *mbuf, size_t msiz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a9b84ef29e7ba25f59fd98e22ad45b2fa">kyototycoon::TimedDB::recover</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>msiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recover the database with an update log message. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td>the pointer to the message region. </td></tr>
    <tr><td class="paramname">msiz</td><td>the size of the message region. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a33d48a58dd9127756da2b22fafe53777"></a><!-- doxytag: member="kyototycoon::TimedDB::match_prefix" ref="a33d48a58dd9127756da2b22fafe53777" args="(const std::string &amp;prefix, std::vector&lt; std::string &gt; *strvec, int64_t max=&#45;1, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a33d48a58dd9127756da2b22fafe53777">kyototycoon::TimedDB::match_prefix</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>strvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get keys matching a prefix string. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">prefix</td><td>the prefix string. </td></tr>
    <tr><td class="paramname">strvec</td><td>a string vector to contain the result. </td></tr>
    <tr><td class="paramname">max</td><td>the maximum number to retrieve. If it is negative, no limit is specified. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of retrieved keys or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a1ca05ebafef224e3ec3b12e7a30b9526"></a><!-- doxytag: member="kyototycoon::TimedDB::match_regex" ref="a1ca05ebafef224e3ec3b12e7a30b9526" args="(const std::string &amp;regex, std::vector&lt; std::string &gt; *strvec, int64_t max=&#45;1, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a1ca05ebafef224e3ec3b12e7a30b9526">kyototycoon::TimedDB::match_regex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>regex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>strvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get keys matching a regular expression string. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">regex</td><td>the regular expression string. </td></tr>
    <tr><td class="paramname">strvec</td><td>a string vector to contain the result. </td></tr>
    <tr><td class="paramname">max</td><td>the maximum number to retrieve. If it is negative, no limit is specified. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of retrieved keys or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ac9aaf82209dc801d4d233cc0c592d67b"></a><!-- doxytag: member="kyototycoon::TimedDB::match_similar" ref="ac9aaf82209dc801d4d233cc0c592d67b" args="(const std::string &amp;origin, size_t range, bool utf, std::vector&lt; std::string &gt; *strvec, int64_t max=&#45;1, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#ac9aaf82209dc801d4d233cc0c592d67b">kyototycoon::TimedDB::match_similar</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>utf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>strvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get keys similar to a string in terms of the levenshtein distance. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">origin</td><td>the origin string. </td></tr>
    <tr><td class="paramname">range</td><td>the maximum distance of keys to adopt. </td></tr>
    <tr><td class="paramname">utf</td><td>flag to treat keys as UTF-8 strings. </td></tr>
    <tr><td class="paramname">strvec</td><td>a string vector to contain the result. </td></tr>
    <tr><td class="paramname">max</td><td>the maximum number to retrieve. If it is negative, no limit is specified. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of retrieved keys or -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a7b77f684161670da7aff694e58c8877b"></a><!-- doxytag: member="kyototycoon::TimedDB::merge" ref="a7b77f684161670da7aff694e58c8877b" args="(TimedDB **srcary, size_t srcnum, MergeMode mode=MSET, kc::BasicDB::ProgressChecker *checker=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a7b77f684161670da7aff694e58c8877b">kyototycoon::TimedDB::merge</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB.html">TimedDB</a> **&#160;</td>
          <td class="paramname"><em>srcary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>srcnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561">MergeMode</a>&#160;</td>
          <td class="paramname"><em>mode</em> = <code><a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac">MSET</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kc::BasicDB::ProgressChecker *&#160;</td>
          <td class="paramname"><em>checker</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Merge records from other databases. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">srcary</td><td>an array of the source detabase objects. </td></tr>
    <tr><td class="paramname">srcnum</td><td>the number of the elements of the source array. </td></tr>
    <tr><td class="paramname">mode</td><td>the merge mode. <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a830e8fa0875a760e2e072e7bf202cbac" title="overwrite the existing value">TimedDB::MSET</a> to overwrite the existing value, <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a8a7b107dd0064ea898a04447c5f587be" title="keep the existing value">TimedDB::MADD</a> to keep the existing value, <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561ad5b739bbc10ab35945963114e02fd3a8" title="modify the existing record only">TimedDB::MREPLACE</a> to modify the existing record only, <a class="el" href="classkyototycoon_1_1TimedDB.html#ae892844efd8d65d383e53a7e91265561a22a0555956d94a65d840423e956d5473" title="append the new value">TimedDB::MAPPEND</a> to append the new value. </td></tr>
    <tr><td class="paramname">checker</td><td>a progress checker object. If it is NULL, no checking is performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a55b5f73fa02f9c898a7a0c998eeb2d0c"></a><!-- doxytag: member="kyototycoon::TimedDB::cursor" ref="a55b5f73fa02f9c898a7a0c998eeb2d0c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkyototycoon_1_1TimedDB_1_1Cursor.html">Cursor</a>* <a class="el" href="classkyototycoon_1_1TimedDB.html#a55b5f73fa02f9c898a7a0c998eeb2d0c">kyototycoon::TimedDB::cursor</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a cursor object. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the return value is the created cursor object. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Because the object of the return value is allocated by the constructor, it should be released with the delete operator when it is no longer in use. </dd></dl>

</div>
</div>
<a class="anchor" id="acd6c95039eb2e1e7f1cb191c08cc272a"></a><!-- doxytag: member="kyototycoon::TimedDB::tune_logger" ref="acd6c95039eb2e1e7f1cb191c08cc272a" args="(kc::BasicDB::Logger *logger, uint32_t kinds=kc::BasicDB::Logger::WARN|kc::BasicDB::Logger::ERROR)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#acd6c95039eb2e1e7f1cb191c08cc272a">kyototycoon::TimedDB::tune_logger</a> </td>
          <td>(</td>
          <td class="paramtype">kc::BasicDB::Logger *&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>kinds</em> = <code>kc::BasicDB::Logger::WARN&#160;|&#160;kc::BasicDB::Logger::ERROR</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the internal logger. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">logger</td><td>the logger object. The same as with kc::BasicDB. </td></tr>
    <tr><td class="paramname">kinds</td><td>kinds of logged messages by bitwise-or: The same as with kc::BasicDB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a6271031b9d1120e9bf30a18d410c02ad"></a><!-- doxytag: member="kyototycoon::TimedDB::tune_update_trigger" ref="a6271031b9d1120e9bf30a18d410c02ad" args="(UpdateTrigger *trigger)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a6271031b9d1120e9bf30a18d410c02ad">kyototycoon::TimedDB::tune_update_trigger</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkyototycoon_1_1TimedDB_1_1UpdateTrigger.html">UpdateTrigger</a> *&#160;</td>
          <td class="paramname"><em>trigger</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the internal update trigger. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">trigger</td><td>the trigger object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="abf8792420b5a102285b2c1581a27a950"></a><!-- doxytag: member="kyototycoon::TimedDB::tokenize_update_log" ref="abf8792420b5a102285b2c1581a27a950" args="(const char *mbuf, size_t msiz, std::vector&lt; std::string &gt; *tokens)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="classkyototycoon_1_1TimedDB.html#abf8792420b5a102285b2c1581a27a950">kyototycoon::TimedDB::tokenize_update_log</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>msiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>tokens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tokenize an update log message. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td>the pointer to the message region. </td></tr>
    <tr><td class="paramname">msiz</td><td>the size of the message region. </td></tr>
    <tr><td class="paramname">tokens</td><td>a string vector to contain the result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a729e92418eb777b7f6687aa7695b0e41"></a><!-- doxytag: member="kyototycoon::TimedDB::status_snapshot_atomic" ref="a729e92418eb777b7f6687aa7695b0e41" args="(const std::string &amp;src, uint64_t *tsp=NULL, int64_t *cntp=NULL, int64_t *sizp=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="classkyototycoon_1_1TimedDB.html#a729e92418eb777b7f6687aa7695b0e41">kyototycoon::TimedDB::status_snapshot_atomic</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>tsp</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>cntp</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>sizp</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get status of an atomic snapshot file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the path of the source file. </td></tr>
    <tr><td class="paramname">tsp</td><td>the pointer to the variable into which the time stamp of the snapshot data is assigned. If it is NULL, it is ignored. </td></tr>
    <tr><td class="paramname">cntp</td><td>the pointer to the variable into which the number of records in the original database is assigned. If it is NULL, it is ignored. </td></tr>
    <tr><td class="paramname">sizp</td><td>the pointer to the variable into which the size of the original database is assigned. If it is NULL, it is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, or false on failure. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2435e4d31a0b3b23aed3f8b5c09b75d8"></a><!-- doxytag: member="kyototycoon::TimedDB::XTWIDTH" ref="a2435e4d31a0b3b23aed3f8b5c09b75d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int32_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a2435e4d31a0b3b23aed3f8b5c09b75d8">kyototycoon::TimedDB::XTWIDTH</a> = 5<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The width of expiration time. </p>

</div>
</div>
<a class="anchor" id="a96ccafc94a249fc1c254014e272905f9"></a><!-- doxytag: member="kyototycoon::TimedDB::XTMAX" ref="a96ccafc94a249fc1c254014e272905f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int64_t <a class="el" href="classkyototycoon_1_1TimedDB.html#a96ccafc94a249fc1c254014e272905f9">kyototycoon::TimedDB::XTMAX</a> = (1LL &lt;&lt; (XTWIDTH * 8)) - 1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum number of expiration time. </p>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri May 25 2012 02:44:32 for Kyoto Tycoon by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
