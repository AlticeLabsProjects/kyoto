<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="author" content="FAL Labs" />
<meta name="keywords" content="Kyoto Tycoon, kyototycoon, database, DBM" />
<meta name="description" content="Specifications of command line utilities" />
<link rel="contents" href="./" />
<link rel="stylesheet" href="common.css" />
<link rel="icon" href="icon16.png" />
<link rev="made" href="mailto:info@fallabs.com" />
<title>Kyoto Tycoon</title>
</head>

<body>

<h1 id="headline">Specifications of Command Line Utilities of Kyoto Tycoon</h1>

<div class="note">Copyright (C) 2009-2012 FAL Labs</div>
<div class="note">Last Update: Tue, 13 January 2015 23:42:50 +0000</div>

<hr />

<p>This document describes how to use command line utilities.  They are useful to manage database contents and to test the library and its applications.</p>

<ol>
<li><a href="#ktserver">ktserver</a> : to run the database server.</li>
<li><a href="#ktutiltest">ktutiltest</a> : to test the utility functions.</li>
<li><a href="#ktutilmgr">ktutilmgr</a> : miscellaneous utilities.</li>
<li><a href="#ktutilserv">ktutilserv</a> : to test the server tool kit.</li>
<li><a href="#kttimedtest">kctimedtest</a> : to test the timed database.</li>
<li><a href="#kttimedmgr">kctimedmgr</a> : to manage the timed database.</li>
<li><a href="#ktremotetest">ktremotetest</a> : to test the remote database.</li>
<li><a href="#ktremotemgr">ktremotemgr</a> : to manage the remote database.</li>
</ol>

<hr />

<h2 id="ktserver">ktserver</h2>

<p>The command `<code>ktserver</code>' runs the server managing database instances.  This command is used in the following format.  `<var>db</var>' specifies a database name.  If no database is specified, an unnamed on-memory database is opened.</p>

<dl class="api">
<dt><code>ktserver [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-th <var>num</var>] [-log <var>file</var>] [-li|-ls|-le|-lz] [-ulog <var>dir</var>] [-ulim <var>num</var>] [-uasi <var>num</var>] [-sid <var>num</var>] [-ord] [-oat|-oas|-onl|-otl|-onr] [-asi <var>num</var>] [-ash] [-bgs <var>dir</var>] [-bgsi <var>num</var>] [-bgsc <var>str</var>] [-dmn] [-pid <var>file</var>] [-scr <var>file</var>] [-mhost <var>str</var>] [-mport <var>num</var>] [-rts <var>file</var>] [-riv <var>num</var>] [-plsv <var>file</var>] [-plex <var>str</var>] [-pldb <var>file</var>] [<var>db</var>...]</code></dt>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-th <var>num</var></code> : specifies the number of worker threads.  By default, it is 16.</li>
<li><code>-log <var>file</var></code> : specifies the path of the log file.  By default, logs are written into the standard output.</li>
<li><code>-li</code> : sets the logging level "INFO".</li>
<li><code>-ls</code> : sets the logging level "SYSTEM".</li>
<li><code>-le</code> : sets the logging level "ERROR".</li>
<li><code>-lz</code> : sets the logging level "NONE".</li>
<li><code>-ulog <var>dir</var></code> : specifies the path of the update log directory.  By default, it is disabled.</li>
<li><code>-ulim <var>num</var></code> : specifies the limit size of each update log file.</li>
<li><code>-uasi <var>num</var></code> : specifies the interval of synchronization of update log files.  By default, it is disabled.</li>
<li><code>-sid <var>num</var></code> : specifies the server ID number.</li>
<li><code>-ord</code> : opens the database as a reader.</li>
<li><code>-oat</code> : opens the database with the auto transaction option.</li>
<li><code>-oas</code> : opens the database with the auto synchronization option.</li>
<li><code>-onl</code> : opens the database with the no locking option.</li>
<li><code>-otl</code> : opens the database with the try locking option.</li>
<li><code>-onr</code> : opens the database with the no auto repair option.</li>
<li><code>-asi <var>num</var></code> : specifies the interval of auto synchronization.  By default, it is disabled.</li>
<li><code>-ash</code> : does physical synchronization while auto synchronization.</li>
<li><code>-bgs <var>dir</var></code> : specifies the path of the background snapshot directory.  By default, it is disabled.</li>
<li><code>-bgsi <var>num</var></code> : specifies the interval of background snapshotting.  By default, it is 180.</li>
<li><code>-bgsc <var>str</var></code> : specifies the compression algorithm of the snapshot.  "zlib", "lzo", are "lzma" are supported.</li>
<li><code>-dmn</code> : switches to a daemon process.</li>
<li><code>-pid <var>file</var></code> : specifies the file to contain the process ID to send signals by.</li>
<li><code>-cmd <var>dir</var></code> : specifies the command search path for outer commands.  By default, it is the current directroy.</li>
<li><code>-scr <var>file</var></code> : specifies the script file for the scripting extention.</li>
<li><code>-mhost <var>str</var></code> : specifies the host name of the master server of replication.</li>
<li><code>-mport <var>num</var></code> : specifies the port number of the master server of replication.</li>
<li><code>-rts <var>file</var></code> : specifies the file to contain the replication time stamp.</li>
<li><code>-riv <var>num</var></code> : specifies the interval of each replication operation in milliseconds.  By default, it is 0.04.</li>
<li><code>-plsv <var>file</var></code> : specifies the shared library file of a pluggable server.</li>
<li><code>-plex <var>str</var></code> : specifies the configuration expression of a pluggable server.</li>
<li><code>-pldb <var>file</var></code> : specifies the shared library file of a pluggable database.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<p>To finish the server process running on foreground, input `<code>Ctrl-C</code>' on the terminal.  To finish the server process running as a daemon, send a termination signal such as SIGTERM using the `<code>kill</code>' command.  The server restarts and the log file is re-opened on SIGUSR1 (and also on SIGHUP, if running as a daemon).  Because the current directory of a daemon process is changed to the root directory, paths of related files should be described as their absolute paths.</p>

<p>The naming convention of database name is the same as polymorphic database of Kyoto Cabinet.  If it is "-", the database will be a prototype hash database.  If it is "+", the database will be a prototype tree database.  If it is ":", the database will be a stash database.  If it is "*", the database will be a cache hash database.  If it is "%", the database will be a cache tree database.  If its suffix is ".kch", the database will be a file hash database.  If its suffix is ".kct", the database will be a file tree database.  If its suffix is ".kcd", the database will be a directory hash database.  If its suffix is ".kcf", the database will be a directory tree database.  Tuning parameters can trail the name, separated by "#".  Each parameter is composed of the name and the value, separated by "=".  If the "type" parameter is specified, the database type is determined by the value in "-", "+", ":", "*", "%", "kch", "kct", "kcd", and "kcf".  All database types support the logging parameters of "log", "logkinds", and "logpx".  The prototype hash database and the prototype tree database do not support any other tuning parameter.  The stash database supports "bnum".  The cache hash database supports "opts", "bnum", "zcomp", "capcnt", "capsiz", and "zkey".  The cache tree database supports all parameters of the cache hash database except for capacity limitation, and supports "psiz", "rcomp", "pccap" in addition.  The file hash database supports "apow", "fpow", "opts", "bnum", "msiz", "dfunit", "zcomp", and "zkey".  The file tree database supports all parameters of the file hash database and "psiz", "rcomp", "pccap" in addition.  The directory hash database supports "opts", "zcomp", and "zkey".  The directory tree database supports all parameters of the directory hash database and "psiz", "rcomp", "pccap" in addition.</p>

<p>Furthermore, several parameters are added by Kyoto Tycoon.  "ktopts" sets options and the value can contain "p" for the persistent option.  "ktcapcnt" sets the capacity by record number.  "ktcapsiz" sets the capacity by database size.</p>

<hr />

<h2 id="ktutiltest">ktutiltest</h2>

<p>The command `<code>ktutiltest</code>' is a utility for facility test and performance test of the utility functions.  This command is used in the following format.  `<var>url</var>' specifies the target URL.  `<var>rnum</var>' specifies the number of iterations.  `<var>proc</var>' specifies the name of the procedure to call.  `<var>name</var>' and `<var>value</var>' specify a pair of the key and the value of an input parameter.  `<var>path</var>' specifies the path of a repository.</p>

<dl class="api">
<dt><code>ktutiltest http [-th <var>num</var>] [-get|-head|-post|-put|-delete] [-body <var>file</var>] [-ah <var>name</var> <var>value</var>] [-qs <var>name</var> <var>value</var>] [-tout <var>num</var>] [-ka] <var>url</var> <var>rnum</var></code></dt>
<dd>Performs test of HTTP sessions.</dd>
<dt><code>ktutiltest rpc [-th <var>num</var>] [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] <var>proc</var> <var>rnum</var> [<var>name</var> <var>value</var> ...]</code></dt>
<dd>Performs test of RPC sessions.</dd>
<dt><code>ktutiltest ulog [-th <var>num</var>] [-ulim <var>num</var>] <var>path</var> <var>rnum</var> [<var>name</var> <var>value</var> ...]</code></dt>
<dd>Performs test of update logging.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-th <var>num</var></code> : specifies the number of worker threads.</li>
<li><code>-get</code> : uses the GET method.</li>
<li><code>-head</code> : uses the HEAD method.</li>
<li><code>-post</code> : uses the POST method.</li>
<li><code>-put</code> : uses the PUT method.</li>
<li><code>-delete</code> : uses the DELETE method.</li>
<li><code>-body <var>file</var></code> : sends the entity body of the content the file.</li>
<li><code>-ah <var>name</var> <var>value</var></code> : adds an HTTP header.</li>
<li><code>-qs <var>name</var> <var>value</var></code> : adds a key/value pair to the query string.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-ka</code> : use keep-alive connection.</li>
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-ulim <var>num</var></code> : specifies the limit size of each update log file.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="ktutilmgr">ktutilmgr</h2>

<p>The command `<code>ktutilmgr</code>' is a tool of miscellaneous utilities, and to show the configuration.  This command is used in the following format.  `<var>url</var>' specifies the target URL.  `<var>proc</var>' specifies the name of the procedure to call.  `<var>name</var>' and `<var>value</var>' specify a pair of the key and the value of an input parameter.  `<var>path</var>' specifies the path of a repository.</p>

<dl class="api">
<dt><code>ktutilmgr date [-ds <var>str</var>] [-jl <var>num</var>] [-wf] [-rf]</code></dt>
<dd>Prints date information.  By default, prints the current UNIX time.</dd>
<dt><code>ktutilmgr http [-get|-head|-post|-put|-delete] [-body <var>file</var>] [-ah <var>name</var> <var>value</var>] [-qs <var>name</var> <var>value</var>] [-tout <var>num</var>] [-ph] [-ec <var>num</var>] <var>url</var></code></dt>
<dd>Performs an HTTP session.</dd>
<dt><code>ktutilmgr rpc [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-ienc <var>str</var>] [-oenc <var>str</var>] <var>proc</var> [<var>name</var> <var>value</var> ...]</code></dt>
<dd>Performs an RPC session.</dd>
<dt><code>ktutilmgr ulog [-ts <var>num</var>] [-uw] [-uf] <var>path</var></code></dt>
<dd>Prints update logs.</dd>
<dt><code>ktutilmgr conf [-v|-i|-l|-p]</code></dt>
<dd>Shows the configuration of Kyoto Tycoon.</dd>
<dt><code>ktutilmgr version</code></dt>
<dd>Shows the version information of Kyoto Tycoon.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-ds <var>str</var></code> : specifies the datetime string.</li>
<li><code>-jl <var>num</var></code> : specifies the jet lag.</li>
<li><code>-wf</code> : formats the output in W3CDTF.</li>
<li><code>-rf</code> : formats the output in RFC 1123 format.</li>
<li><code>-get</code> : uses the GET method.</li>
<li><code>-head</code> : uses the HEAD method.</li>
<li><code>-post</code> : uses the POST method.</li>
<li><code>-put</code> : uses the PUT method.</li>
<li><code>-delete</code> : uses the DELETE method.</li>
<li><code>-body <var>file</var></code> : sends the entity body of the content the file.</li>
<li><code>-ah <var>name</var> <var>value</var></code> : adds an HTTP header.</li>
<li><code>-qs <var>name</var> <var>value</var></code> : adds a key/value pair to the query string.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-ph</code> : prints response headers.</li>
<li><code>-ec <var>num</var></code> : reports error if the response code is not the same as the expected.</li>
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-ienc <var>str</var></code> : specifies the encoding of the input data.</li>
<li><code>-oenc <var>str</var></code> : specifies the encoding of the output data.</li>
<li><code>-ts <var>num</var></code> : specifies the maximum time stamp of already read logs.  "now" means the current time stamp.</li>
<li><code>-uw</code> : waits for update forever.</li>
<li><code>-uf</code> : prints status of each update log file.</li>
<li><code>-v</code> : show the version number of Kyoto Tycoon.</li>
<li><code>-i</code> : show options to include the headers of Tokyo Tycoon.</li>
<li><code>-l</code> : show options to link the library of Tokyo Tycoon.</li>
<li><code>-p</code> : show the directory path of the commands.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="ktutilserv">ktutilserv</h2>

<p>The command `<code>ktutilserv</code>' is a utility for facility test and performance test of the server tool kit.  This command is used in the following format.  `<var>basedir</var>' specifies the document root directory.</p>

<dl class="api">
<dt><code>ktutilserv echo [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>]</code></dt>
<dd>Runs the single-threaded echo server.</dd>
<dt><code>ktutilserv mtecho [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-th <var>num</var>] [-li|-ls|-le|-lz]</code></dt>
<dd>Runs the multi-threaded echo server.</dd>
<dt><code>ktutilserv http [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-th <var>num</var>] [-li|-ls|-le|-lz] [<var>basedir</var>]</code></dt>
<dd>Runs the HTTP server.</dd>
<dt><code>ktutilserv rpc [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-th <var>num</var>] [-li|-ls|-le|-lz]</code></dt>
<dd>Runs the RPC server.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-th <var>num</var></code> : specifies the number of worker threads.  By default, it is 16.</li>
<li><code>-li</code> : sets the logging level "INFO".</li>
<li><code>-ls</code> : sets the logging level "SYSTEM".</li>
<li><code>-le</code> : sets the logging level "ERROR".</li>
<li><code>-lz</code> : sets the logging level "NONE".</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="kttimedtest">kttimedtest</h2>

<p>The command `<code>kttimedtest</code>' is a utility for facility test and performance test of the timed database.  This command is used in the following format.  `<var>path</var>' specifies the path of a database file.  `<var>rnum</var>' specifies the number of iterations.</p>

<dl class="api">
<dt><code>kttimedtest order [-th <var>num</var>] [-rnd] [-set|-get|-getw|-rem|-etc] [-tran] [-oat|-onl|-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-lv] <var>path</var> <var>rnum</var></code></dt>
<dd>Performs in-order tests.</dd>
<dt><code>kttimedtest queue [-th <var>num</var>] [-it <var>num</var>] [-rnd] [-oat|-onl|-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-lv] <var>path</var> <var>rnum</var></code></dt>
<dd>Performs queuing operations.</dd>
<dt><code>kttimedtest wicked [-th <var>num</var>] [-it <var>num</var>] [-oat|-onl|-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-lv] <var>path</var> <var>rnum</var></code></dt>
<dd>Performs mixed operations selected at random.</dd>
<dt><code>kttimedtest tran [-th <var>num</var>] [-it <var>num</var>] [-hard] [-oat|-onl|-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-lv] <var>path</var> <var>rnum</var></code></dt>
<dd>Performs test of transaction.</dd>
<dt><code>kctimedtest mapred [-rnd] [-ru] [-oat|-onl|-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-lv] [-tmp <var>str</var>] [-dbnum <var>num</var>] [-clim <var>num</var>] [-cbnum <var>num</var>] [-xnl] [-xpm] [-xpr] [-xpf] [-xnc] <var>path</var> <var>rnum</var></code></dt>
<dd>Performs MapReduce operations.</dd>
<dt><code>kttimedtest misc <var>path</var></code></dt>
<dd>Performs miscellaneous tests.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-th <var>num</var></code> : specifies the number of worker threads.</li>
<li><code>-rnd</code> : performs random test.</li>
<li><code>-set</code> : performs setting operation only.</li>
<li><code>-get</code> : performs getting operation only.</li>
<li><code>-getw</code> : performs getting with a buffer operation only.</li>
<li><code>-rem</code> : performs removing operation only.</li>
<li><code>-etc</code> : performs miscellaneous operations.</li>
<li><code>-tran</code> : performs transaction.</li>
<li><code>-oat</code> : opens the database with the auto transaction option.</li>
<li><code>-oas</code> : opens the database with the auto synchronization option.</li>
<li><code>-onl</code> : opens the database with the no locking option.</li>
<li><code>-otl</code> : opens the database with the try locking option.</li>
<li><code>-onr</code> : opens the database with the no auto repair option.</li>
<li><code>-ulog <var>str</var></code> : specifies the update log directory.</li>
<li><code>-ulim <var>num</var></code> : specifies the limit size of each update log file.</li>
<li><code>-sid <var>num</var></code> : specifies the server ID number.</li>
<li><code>-dbid <var>num</var></code> : specifies the database ID number.</li>
<li><code>-lv</code> : reports all errors.</li>
<li><code>-it <var>num</var></code> : specifies the number of repetition.</li>
<li><code>-hard</code> : performs physical synchronization.</li>
<li><code>-ru</code> : reuses the existing database.</li>
<li><code>-tmp <var>str</var></code> : specifies the path of a directory for temporary storage.</li>
<li><code>-dbnum <var>num</var></code> : specifies the number of temporary databases.</li>
<li><code>-clim <var>num</var></code> : specifies the limit size of cache memory.</li>
<li><code>-cbnum <var>num</var></code> : specifies the bucket number of cache memory.</li>
<li><code>-xnl</code> : executes with the no locking option.</li>
<li><code>-xpm</code> : executes with the parallel mapper option.</li>
<li><code>-xpr</code> : executes with the parallel reducer option.</li>
<li><code>-xpf</code> : executes with the parallel flusher option.</li>
<li><code>-xnc</code> : executes with the no compression option.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="kttimedmgr">kttimedmgr</h2>

<p>The command `<code>kttimedmgr</code>' is a utility for test and debugging of the timed database and its applications.  `<var>path</var>' specifies the path of a database file.  `<var>key</var>' specifies the key of a record.  `<var>value</var>' specifies the value of a record.  `<var>file</var>' specifies the input/output file.  `<var>dir</var>' specifies the input/output directory.  `<var>src</var>' specifies other database files.</p>

<dl class="api">
<dt><code>kttimedmgr create [-otr] [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var></code></dt>
<dd>Creates a database file.</dd>
<dt><code>kttimedmgr inform [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-st] <var>path</var></code></dt>
<dd>Prints status information.</dd>
<dt><code>kttimedmgr set [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-add|-app|-rep|-inci|-incd] [-sx] [-xt <var>num</var>] <var>path</var> <var>key</var> <var>value</var></code></dt>
<dd>Stores a record.</dd>
<dt><code>kttimedmgr remove [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-sx] <var>path</var> <var>key</var></code></dt>
<dd>Removes a record.</dd>
<dt><code>kttimedmgr get [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-rm] [-sx] [-px] [-pt] [-pz] <var>path</var> <var>key</var></code></dt>
<dd>Prints the value of a record.</dd>
<dt><code>kttimedmgr list [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-des] [-max <var>num</var>] [-rm] [-sx] [-pv] [-px] [-pt] <var>path</var> [<var>key</var>]</code></dt>
<dd>Prints keys of all records, separated by line feeds.</dd>
<dt><code>kttimedmgr clear [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var></code></dt>
<dd>Removes all records of a database.</dd>
<dt><code>kttimedmgr import [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-sx] [-xt <var>num</var>] <var>path</var> [<var>file</var>]</code></dt>
<dd>Imports records from a TSV file.</dd>
<dt><code>kttimedmgr copy [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var> <var>file</var></code></dt>
<dd>Copies the whole database.</dd>
<dt><code>kttimedmgr dump [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var> [<var>file</var>]</code></dt>
<dd>Dumps records into a snapshot file.</dd>
<dt><code>kttimedmgr load [-otr] [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var> [<var>file</var>]</code></dt>
<dd>Loads records from a snapshot file.</dd>
<dt><code>kttimedmgr vacuum [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var></code></dt>
<dd>Eliminates regions of expired records.</dd>
<dt><code>kttimedmgr recover [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-ts <var>num</var>] <var>path</var></code> <var>dir</var></dt>
<dd>Recover the database with update log data.</dd>
<dt><code>kttimedmgr merge [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] [-add|-app|-rep] <var>path</var> <var>src</var>...</code></dt>
<dd>Merge records from other databases.</dd>
<dt><code>kttimedmgr check [-onl|-otl|-onr] [-ulog <var>str</var>] [-ulim <var>num</var>] [-sid <var>num</var>] [-dbid <var>num</var>] <var>path</var></code></dt>
<dd>Checks consistency.</dd>
<dt><code>kttimedmgr bgsinform <var>file</var></code></dt>
<dd>Prints status information of background snapshot files.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-otr</code> : opens the database with the truncation option.</li>
<li><code>-onl</code> : opens the database with the no locking option.</li>
<li><code>-otl</code> : opens the database with the try locking option.</li>
<li><code>-onr</code> : opens the database with the no auto repair option.</li>
<li><code>-ulog <var>str</var></code> : specifies the update log directory.</li>
<li><code>-ulim <var>num</var></code> : specifies the limit size of each update log file.</li>
<li><code>-sid <var>num</var></code> : specifies the server ID number.</li>
<li><code>-dbid <var>num</var></code> : specifies the database ID number.</li>
<li><code>-st</code> : prints miscellaneous information.</li>
<li><code>-add</code> : performs adding operation.</li>
<li><code>-app</code> : performs appending operation.</li>
<li><code>-rep</code> : performs replacing operation.</li>
<li><code>-inci</code> : performs integer increment operation.</li>
<li><code>-incd</code> : performs real number increment operation.</li>
<li><code>-sx</code> : the input data is evaluated as a hexadecimal data string.</li>
<li><code>-xt <var>num</var></code> : specifies the expiration time.</li>
<li><code>-rm</code> : removes the record.</li>
<li><code>-px</code> : the output data is converted into a hexadecimal data string.</li>
<li><code>-pt</code> : prints the expiration time also.</li>
<li><code>-pz</code> : does not append line feed at the end of the output.</li>
<li><code>-des</code> : visits records in descending order.</li>
<li><code>-max <var>num</var></code> : specifies the maximum number of shown records.</li>
<li><code>-pv</code> : prints values of records also.</li>
<li><code>-ts <var>num</var></code> : specifies the maximum time stamp of already read logs.  "now" means the current time stamp.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="ktremotetest">ktremotetest</h2>

<p>The command `<code>ktremotetest</code>' is a utility for facility test and performance test of the remote database.  This command is used in the following format.  `<var>rnum</var>' specifies the number of iterations.</p>

<dl class="api">
<dt><code>ktremotetest order [-th <var>num</var>] [-rnd] [-set|-get|-rem|-etc] [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] <var>rnum</var></code></dt>
<dd>Performs in-order tests.</dd>
<dt><code>ktremotetest bulk [-th <var>num</var>] [-bin] [-rnd] [-set|-get|-rem|-etc] [-bulk <var>num</var>] [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bnr] <var>rnum</var></code></dt>
<dd>Performs bulk operation tests.</dd>
<dt><code>ktremotetest wicked [-th <var>num</var>] [-it <var>num</var>] [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] <var>rnum</var></code></dt>
<dd>Performs mixed operations selected at random.</dd>
<dt><code>ktremotetest usual [-th <var>num</var>] [-it <var>num</var>] [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-kp <var>num</var>] [-vs <var>num</var>] [-xt <var>num</var>] [-iv <var>num</var>] <var>rnum</var></code></dt>
<dd>Performs mixed operations to simulate usual use cases.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-th <var>num</var></code> : specifies the number of worker threads.</li>
<li><code>-rnd</code> : performs random test.</li>
<li><code>-set</code> : performs setting operation only.</li>
<li><code>-get</code> : performs getting operation only.</li>
<li><code>-rem</code> : performs removing operation only.</li>
<li><code>-etc</code> : performs miscellaneous operations.</li>
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-bin</code> : uses the binary protocol.</li>
<li><code>-bulk <var>num</var></code> : specifies the number of records in a bulk operation.</li>
<li><code>-bnr</code> : enables the no-reply option in the binary protocol.</li>
<li><code>-it <var>num</var></code> : specifies the number of repetition.</li>
<li><code>-kp <var>num</var></code> : specifies the number of patterns of keys.</li>
<li><code>-vs <var>num</var></code> : specifies the size of each value.</li>
<li><code>-xt <var>num</var></code> : specifies the expiration date.</li>
<li><code>-iv <var>num</var></code> : specifies the interval of each operation in milliseconds.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

<h2 id="ktremotemgr">ktremotemgr</h2>

<p>The command `<code>ktremotedmgr</code>' is a utility for test and debugging of the remote database and its applications.  `<var>proc</var>' specifies the name of a procedure.  `<var>params</var>' specifies arbitrary parameters.  `<var>mhost</var>' specifies the host name of the master server.  `<var>key</var>' specifies the key of a record.  `<var>value</var>' specifies the value of a record.</p>

<dl class="api">
<dt><code>ktremotemgr report [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>]</code></dt>
<dd>Prints statistics of the server.</dd>
<dt><code>ktremotemgr script [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] <var>proc</var> [<var>params</var>...]</code></dt>
<dd>Calls a procedure of the scripting extension.</dd>
<dt><code>ktremotemgr tunerepl [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-mport <var>str</var>] [-ts <var>num</var>] [-iv <var>num</var>] [<var>mhost</var>]</code></dt>
<dd>Sets the replication configuration.</dd>
<dt><code>ktremotemgr inform [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-st]</code></dt>
<dd>Prints status information of a database.</dd>
<dt><code>ktremotemgr clear [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>]</code></dt>
<dd>Removes all records of a database.</dd>
<dt><code>ktremotemgr sync [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-hard] [-cmd <var>str</var>]</code></dt>
<dd>Synchronizes updated contents with the file and the device.</dd>
<dt><code>ktremotemgr set [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-add|-rep|-app|-inci|-incd] [-sx] [-xt <var>num</var>] <var>key</var> <var>value</var></code></dt>
<dd>Stores a record.</dd>
<dt><code>ktremotemgr remove [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] <var>key</var></code></dt>
<dd>Removes a record.</dd>
<dt><code>ktremotemgr get [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-rm] [-sx] [-px] [-pt] [-pz] <var>key</var></code></dt>
<dd>Prints the value of a record.</dd>
<dt><code>ktremotemgr list [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-des] [-max <var>num</var>] [-rm] [-sx] [-pv] [-px] [-pt] [<var>key</var>]</code></dt>
<dd>Prints keys of all records, separated by line feeds.</dd>
<dt><code>ktremotemgr import [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-db <var>str</var>] [-sx] [-xt <var>num</var>] [<var>file</var>]</code></dt>
<dd>Imports records from a TSV file.</dd>
<dt><code>ktremotemgr vacuum [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-step <var>num</var>] <var>path</var></code></dt>
<dd>Eliminates regions of expired records.</dd>
<dt><code>ktremotemgr slave [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-ts <var>num</var>] [-sid <var>num</var>] [-ux] [-uw] [-uf] [-ur]</code></dt>
<dd>Simulates a client of replication and prints update logs.</dd>
<dt><code>ktremotemgr setbulk [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] [-xt <var>num</var>] <var>key</var> <var>value</var> ...</code></dt>
<dd>Store records at once.</dd>
<dt><code>ktremotemgr removebulk [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] <var>key</var> ...</code></dt>
<dd>Remove records at once.</dd>
<dt><code>ktremotemgr getbulk [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] [-px] <var>key</var> ...</code></dt>
<dd>Retrieve records at once.</dd>
<dt><code>ktremotemgr match [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] [-px] [-limit <var>num</var>] <var>prefix</var> ...</code></dt>
<dd>Prints keys starting with "prefix", separated by line feeds.</dd>
<dt><code>ktremotemgr regex [-host <var>str</var>] [-port <var>num</var>] [-tout <var>num</var>] [-bin] [-swname <var>str</var>] [-swtime <var>num</var>] [-ssname <var>str</var>] [-ssbrd] [-db <var>str</var>] [-sx] [-px] [-limit <var>num</var>] <var>regex</var> ...</code></dt>
<dd>Prints keys matching "regex", separated by line feeds.</dd>
</dl>

<p>Options feature the following.</p>

<ul class="options">
<li><code>-host <var>str</var></code> : specifies the host name of the server.</li>
<li><code>-port <var>num</var></code> : specifies the port number of the server.</li>
<li><code>-tout <var>num</var></code> : specifies the timeout in seconds.</li>
<li><code>-swname <var>str</var></code> : waits for a signal by a named condition variable.</li>
<li><code>-swtime <var>num</var></code> : specifies the timeout of signal waiting in seconds.</li>
<li><code>-ssname <var>str</var></code> : sends a signal to a named condition variable.</li>
<li><code>-ssbrd</code> : switches signal sending to broadcasting.</li>
<li><code>-bin</code> : uses the binary protocol.</li>
<li><code>-mport <var>num</var></code> : specifies the port number of the master server.</li>
<li><code>-ts <var>num</var></code> : specifies the maximum time stamp of already read logs.  "now" means the current time stamp.</li>
<li><code>-iv <var>num</var></code> : specifies the interval of each replication operation in milliseconds.</li>
<li><code>-db <var>str</var></code> : specifies the target database.</li>
<li><code>-st</code> : prints miscellaneous information.</li>
<li><code>-hard</code> : performs physical synchronization with the device.</li>
<li><code>-cmd <var>str</var></code> : specifies an outer command for postprocessing.</li>
<li><code>-add</code> : performs adding operation.</li>
<li><code>-app</code> : performs appending operation.</li>
<li><code>-rep</code> : performs replacing operation.</li>
<li><code>-inci</code> : performs integer increment operation.</li>
<li><code>-incd</code> : performs real number increment operation.</li>
<li><code>-sx</code> : the input data is evaluated as a hexadecimal data string.</li>
<li><code>-xt <var>num</var></code> : specifies the expiration time.</li>
<li><code>-rm</code> : removes the record.</li>
<li><code>-px</code> : the output data is converted into a hexadecimal data string.</li>
<li><code>-pt</code> : prints the expiration time also.</li>
<li><code>-pz</code> : does not append line feed at the end of the output.</li>
<li><code>-des</code> : visits records in descending order.</li>
<li><code>-max <var>num</var></code> : specifies the maximum number of shown records.</li>
<li><code>-pv</code> : prints values of records also.</li>
<li><code>-step <var>num</var></code> : specifies the number of steps.</li>
<li><code>-sid <var>num</var></code> : specifies the server ID number.</li>
<li><code>-ux</code> : fetches update logs of the specified server ID number only.</li>
<li><code>-uw</code> : waits for update forever.</li>
<li><code>-uf</code> : prints status of each update log file.</li>
<li><code>-ur</code> : remove old update log files.</li>
<li><code>-limit <var>num</var></code> : specifies the maximum number of records to return.</li>
</ul>

<p>This command returns 0 on success, another on failure.</p>

<hr />

</body>

</html>

<!-- END OF FILE -->
